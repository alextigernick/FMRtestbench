<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Control</title>
    <style>
      table, td, th {  
        border: 1px solid #ddd;
      }

      table {
        border-collapse: collapse;
      }

      th, td {
        padding: 5px;
      }
      .container {
        display: grid;
        grid-template-columns: 50% 50%;
      }
      .c1{
        grid-column-start: 1;
        grid-column-end: 1;
      }
      .c2{
        grid-column-start: 2;
        grid-column-end: 2;
      }
    </style>
  </head>
  <body class="container">
    <div class="c1">
      <table>
        <tr>
          <th>
            Volt meter
          </th>
          <td>
            <form id="serial" onsubmit="connectVolt();return false;" action="#">
              <select id="portselect"></select><button type="button" onclick="refreshPorts()">↻</button><input type="submit" value="Connect">
              <select id="baudrate">
                <option value="300">4800</option>
                <option value="600">2400</option>
                <option value="1200">4800</option>
                <option value="2400">2400</option>
                <option value="4800">4800</option>
                <option value="9600" >9600</option>
                <option value="19200"selected>19200</option>
              </select>
            </form>
          </td>
        </tr>
        <tr>
          <th>
            Power Supply
          </th>
          <td>
            <form id="serial2" onsubmit="connectPower();return false;" action="#">
              <select id="portselect"></select><button type="button" onclick="refreshPorts()">↻</button><input type="submit" value="Connect">
              <select id="baudrate">
                <option value="300">4800</option>
                <option value="600">2400</option>
                <option value="1200">4800</option>
                <option value="2400">2400</option>
                <option value="4800">4800</option>
                <option value="9600" >9600</option>
                <option value="19200"selected>19200</option>
              </select>
            </form>
          </td>
        </tr>
        <tr>
          <th>Lock-in</th>
          <td>
            <button id="connectLock" onclick="connectLock()">Connect</button>
          </td>
        </tr>
        <tr>
          <th>RF source</th>
          <td>
            <button id="connectRF" onclick="connectRF()">Connect</button>
          </td>
        </tr>
        <tr>
          <th>Gauss meter</th>
          <td>
            <button id="connectGauss" onclick="connectGauss()">Connect</button>
          </td>
        </tr>
      </table>
      
      <table>
        <tr><th>Voltage:</th><td id="voltage">NA</td></tr>
        <tr><th>Lock-in X:</th><td id="magX">NA</td></tr>
        <tr><th>Lock-in Y:</th><td id="magY">NA</td></tr>
        <tr><th>Poll interval:</th><td><input type="number" id="poll" value="1" step="0.01"></td></tr>
      </table>
      <table>
        <tr><th colspan=3>Power Supply</th></tr>
        <tr><th>Current:</th><td><input type="number" id="iset" value="1" step="0.01"></td><td><button onclick="currentSet(parseFloat(document.getElementById('iset').value));">Send</button></td></tr>
        <tr><th>Voltage:</th><td><input type="number" id="vset" value="10" step="0.01"></td><td><button onclick="voltageSet(parseFloat(document.getElementById('vset').value));">Send</button></td></tr>
        <tr><td><button onclick="powOn();">On</button></td><td><button onclick="powOff();">Off</button></td><td><button onclick="polaritySet(0);">Toggle Polarity</button></td></tr>
      </table>
      <table>
        <tr><th colspan=3>RF Source</th></tr>
        <tr><th>Frequency:</th><td><input type="number" id="freq" value="100000" step="1"></td><td><button onclick="freqSet(parseFloat(document.getElementById('freq').value));">Send</button></td></tr>
        <tr><th>Amplitude:</th><td><input type="number" id="dbm" value="0" step="1"></td><td><button onclick="dbmSet(parseFloat(document.getElementById('dbm').value));">Send</button></td></tr>
        <tr><td><button onclick="rfOn();">On</button></td><td><button onclick="rfOff();">Off</button></td></tr>
      </table>
      <table>
      <form onsubmit="addToQueue();return false;" id="program" action="#">
        <br>
        Program:
        <br>
        <textarea rows="" cols="" name="program">empty</textarea>
        <br>
        <input type="submit" value="GO">
      </form>
    </div>
	<div class="c2">
	<form id="plotsettings">
	  <table>
	  <tr><th>X</th><th>Y</th></tr>
	  <tr>
	  <td>
		  <input type="radio" id="t" name="xselect" value="0">
		  <label for="t">t</label><br>
		  Lock-in<br>
		  <input type="radio" id="x" name="xselect" value="1">
		  <label for="x">x</label><br>
		  <input type="radio" id="y" name="xselect" value="2">
		  <label for="y">y</label><br>
		  
		  <input type="radio" id="mag" name="xselect" value="-1">
		  <label for="mag">mag</label><br>
		  <input type="radio" id="pha" name="xselect" value="-2">
		  <label for="pha">phase</label><br>
		  NVM<br>
		  <input type="radio" id="v" name="xselect" value="3">
		  <label for="v">Voltage</label><br>
		  Power<br>
		  <input type="radio" id="i" name="xselect" value="4">
		  <label for="i">current</label><br>
		  RF Source<br>
		  <input type="radio" id="freq" name="xselect" value="5">
		  <label for="freq">Frequency</label><br>
		  <input type="radio" id="dbm" name="xselect" value="6">
		  <label for="dbm">dBm</label><br>
	  </td>
	  <td>
		  <input type="checkbox" id="yt" name="yselect" value="0">
		  <label for="yt">t</label>
		  <input type="number" id="ytscale" name="yscale" value="1"><br>
		  Lock-in<br>
		  <input type="checkbox" id="yx" name="yselect" value="1">
		  <label for="yx">x</label>
		  <input type="number" id="yxscale" name="yscale" value="1"><br>
		  <input type="checkbox" id="yy" name="yselect" value="2">
		  <label for="yy">y</label>
		  <input type="number" id="yyscale" name="yscale" value="1"><br>
		  
		  <input type="checkbox" id="ymag" name="yselect" value="-1">
		  <label for="ymag">mag</label>
		  <input type="number" id="ymagscale" name="yscale" value="1"><br>
		  <input type="checkbox" id="ypha" name="yselect" value="-2">
		  <label for="ypha">phase</label>
		  <input type="number" id="yphascale" name="yscale" value="1"><br>
		  NVM<br>
		  <input type="checkbox" id="yv" name="yselect" value="3">
		  <label for="yv">Voltage</label>
		  <input type="number" id="yvscale" name="yscale" value="1"><br>
		  Power<br>
		  <input type="checkbox" id="yi" name="yselect" value="4">
		  <label for="yi">current</label>
		  <input type="number" id="yiscale" name="yscale" value="1"><br>
		  RF Source<br>
		  <input type="checkbox" id="yfreq" name="yselect" value="5">
		  <label for="yfreq">Frequency</label>
		  <input type="number" id="yfreqscale" name="yscale" value="1"><br>
		  <input type="checkbox" id="ydbm" name="yselect" value="6">
		  <label for="ydbm">dBm</label>
		  <input type="number" id="ydbmscale" name="yscale" value="1"><br>
	  </td>
	  </tr></table>
	</form>
	  
	  <input type="submit" value="Submit">
	  <button onclick="StartLogging()">Start/Clear Logging</button>
	  <button onclick="StopLogging();">Stop Logging</button>
	  <button onclick="var fname = dialog.showSaveDialogSync(); if(fname){SaveLogs(fname);}">Save Logs</button>
	  <div id="PlotDiv">
	  </div>
	  
	</div>
    <script src="./renderer.js"></script>
  </body>
</html>
